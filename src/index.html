<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Whisper Voice</title>
  <script src="./tailwind.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'app-bg': '#1a1a2e',
            'app-dark': '#0d0d14',
            'app-card': '#16213e',
            'app-accent': '#4a9eff',
            'app-success': '#4ade80',
            'app-error': '#f87171',
          }
        }
      }
    }
  </script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #1a1a2e;
      color: #fff;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .app-content {
      flex: 1;
      display: flex;
      overflow: hidden;
    }

    /* Titlebar */
    .titlebar {
      height: 32px;
      background: #0d0d14;
      display: flex;
      justify-content: flex-end;
      -webkit-app-region: drag;
    }

    .window-controls {
      display: flex;
      -webkit-app-region: no-drag;
    }

    .window-btn {
      width: 46px;
      height: 32px;
      border: none;
      background: transparent;
      color: #888;
      font-size: 10px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.15s;
    }

    .window-btn:hover {
      background: rgba(255,255,255,0.1);
      color: #fff;
    }

    .window-btn.close:hover {
      background: #e81123;
      color: #fff;
    }

    .window-btn svg {
      width: 10px;
      height: 10px;
      fill: currentColor;
    }

    /* Sidebar */
    .sidebar {
      width: 220px;
      background: #12121c;
      border-right: 1px solid rgba(255,255,255,0.06);
      display: flex;
      flex-direction: column;
      padding: 20px 0;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 0 20px;
      margin-bottom: 30px;
    }

    .logo-icon {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, #00d4ff, #0099cc);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo-icon svg {
      width: 18px;
      height: 18px;
      fill: #fff;
    }

    .logo-text {
      font-size: 18px;
      font-weight: 600;
      color: #fff;
    }

    .nav {
      flex: 1;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      color: #888;
      cursor: pointer;
      transition: all 0.2s;
      border-left: 3px solid transparent;
    }

    .nav-item:hover {
      background: rgba(255,255,255,0.03);
      color: #fff;
    }

    .nav-item.active {
      background: rgba(0, 212, 255, 0.08);
      color: #00d4ff;
      border-left-color: #00d4ff;
    }

    .nav-item svg {
      width: 20px;
      height: 20px;
      fill: currentColor;
    }

    .nav-item span {
      font-size: 14px;
    }

    .sidebar-footer {
      padding: 20px;
      border-top: 1px solid rgba(255,255,255,0.06);
    }

    .version-badge {
      display: inline-block;
      background: rgba(0, 212, 255, 0.15);
      color: #00d4ff;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 500;
    }

    .hotkey-badge {
      margin-top: 12px;
      padding: 10px;
      background: rgba(255,255,255,0.03);
      border-radius: 8px;
      font-size: 12px;
      color: #888;
    }

    .hotkey-badge kbd {
      background: #00d4ff;
      color: #1a1a2e;
      padding: 3px 8px;
      border-radius: 4px;
      font-weight: 600;
      font-size: 11px;
    }

    /* Main Content */
    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .header {
      padding: 25px 30px;
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }

    .welcome {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .stats {
      display: flex;
      gap: 20px;
    }

    .stat {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: #888;
    }

    .stat-icon {
      font-size: 14px;
    }

    .stat-value {
      color: #fff;
      font-weight: 500;
    }

    /* Content Panels */
    .content {
      flex: 1;
      overflow-y: auto;
      padding: 25px 30px;
    }

    .panel {
      display: none;
    }

    .panel.active {
      display: block;
    }

    /* Home Panel */
    .record-section {
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 150, 200, 0.05));
      border: 1px solid rgba(0, 212, 255, 0.2);
      border-radius: 16px;
      padding: 30px;
      text-align: center;
      margin-bottom: 25px;
    }

    .record-btn {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 3px solid #00d4ff;
      background: rgba(0, 212, 255, 0.1);
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
    }

    .record-btn:hover {
      background: rgba(0, 212, 255, 0.2);
      transform: scale(1.05);
    }

    .record-btn.recording {
      border-color: #ff4466;
      background: rgba(255, 68, 102, 0.2);
      animation: pulse 1.5s infinite;
    }

    .record-btn svg {
      width: 40px;
      height: 40px;
      fill: #00d4ff;
    }

    .record-btn.recording svg {
      fill: #ff4466;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 68, 102, 0.4); }
      50% { transform: scale(1.03); box-shadow: 0 0 0 15px rgba(255, 68, 102, 0); }
    }

    .record-hint {
      color: #888;
      font-size: 14px;
    }

    .record-hint kbd {
      background: rgba(255,255,255,0.1);
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      color: #fff;
    }

    .status-text {
      margin-top: 15px;
      font-size: 14px;
      color: #00d4ff;
      min-height: 20px;
    }

    .status-text.error {
      color: #ff4466;
    }

    .status-text.success {
      color: #44ff88;
    }

    /* History Section */
    .section-title {
      font-size: 12px;
      font-weight: 600;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 15px;
    }

    .history-list {
      background: rgba(255,255,255,0.02);
      border-radius: 12px;
      overflow: hidden;
    }

    .history-item {
      padding: 15px 20px;
      border-bottom: 1px solid rgba(255,255,255,0.04);
      display: flex;
      gap: 15px;
    }

    .history-item:last-child {
      border-bottom: none;
    }

    .history-time {
      font-size: 12px;
      color: #666;
      min-width: 70px;
    }

    .history-text {
      flex: 1;
      font-size: 14px;
      color: #ccc;
      line-height: 1.5;
    }

    .history-empty {
      padding: 40px;
      text-align: center;
      color: #666;
      font-size: 14px;
    }

    /* Settings Panel */
    .settings-group {
      background: rgba(255,255,255,0.02);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .settings-group-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 20px;
      color: #fff;
    }

    .setting-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid rgba(255,255,255,0.04);
    }

    .setting-row:last-child {
      border-bottom: none;
    }

    .setting-label {
      font-size: 14px;
      color: #aaa;
    }

    .setting-desc {
      font-size: 12px;
      color: #666;
      margin-top: 4px;
    }

    select, input[type="text"] {
      background: #252535;
      border: 1px solid rgba(255,255,255,0.1);
      color: #fff;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 13px;
      min-width: 150px;
    }

    select option {
      background: #252535;
      color: #fff;
    }

    select:focus, input:focus {
      outline: none;
      border-color: #00d4ff;
    }

    .hotkey-btn {
      background: #252535;
      border: 1px solid rgba(255,255,255,0.1);
      color: #fff;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s;
      min-width: 150px;
    }

    .hotkey-btn:hover {
      border-color: #00d4ff;
      background: #2a2a3e;
    }

    .hotkey-btn.recording {
      border-color: #00d4ff;
      background: rgba(0, 212, 255, 0.15);
      animation: blink 0.5s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    /* Toggle Switch */
    .toggle {
      position: relative;
      width: 48px;
      height: 26px;
    }

    .toggle input {
      display: none;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #333;
      border-radius: 26px;
      transition: 0.3s;
    }

    .toggle-slider::before {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      left: 3px;
      bottom: 3px;
      background: #fff;
      border-radius: 50%;
      transition: 0.3s;
    }

    .toggle input:checked + .toggle-slider {
      background: #00d4ff;
    }

    .toggle input:checked + .toggle-slider::before {
      transform: translateX(22px);
    }

    /* Notes Panel */
    .notes-header {
      text-align: center;
      padding: 30px 20px;
      background: rgba(255,255,255,0.02);
      border-radius: 12px;
      margin-bottom: 20px;
    }

    .notes-title {
      font-size: 18px;
      font-weight: 500;
      color: #00d4ff;
      margin-bottom: 20px;
    }

    .notes-editor-container {
      background: #252538;
      border-radius: 12px;
      padding: 15px;
      max-width: 600px;
      margin: 0 auto;
      border: 1px solid rgba(0, 212, 255, 0.2);
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    .notes-textarea {
      width: 100%;
      min-height: 80px;
      background: transparent;
      border: none;
      color: #e0e0e0;
      font-size: 14px;
      line-height: 1.5;
      resize: vertical;
      font-family: inherit;
    }

    .notes-textarea::placeholder {
      color: #666;
    }

    .notes-textarea:focus {
      outline: none;
    }

    .notes-editor-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid rgba(255,255,255,0.08);
    }

    .notes-save-btn {
      background: rgba(0, 212, 255, 0.15);
      border: 1px solid rgba(0, 212, 255, 0.3);
      color: #00d4ff;
      padding: 8px 20px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .notes-save-btn:hover {
      background: rgba(0, 212, 255, 0.25);
      border-color: #00d4ff;
    }

    .notes-edit-hint {
      margin-top: 10px;
      font-size: 12px;
      color: #888;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .notes-cancel-btn {
      background: transparent;
      border: 1px solid rgba(255,255,255,0.2);
      color: #888;
      padding: 4px 12px;
      border-radius: 4px;
      font-size: 11px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .notes-cancel-btn:hover {
      background: rgba(255,255,255,0.05);
      color: #fff;
    }

    .notes-mic-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      background: #00d4ff;
      color: #1a1a2e;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .notes-mic-btn:hover {
      background: #33ddff;
      transform: scale(1.05);
    }

    .notes-mic-btn.recording {
      background: #ff4466;
      animation: pulse 1s infinite;
    }

    .notes-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .notes-actions {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .notes-search {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      color: #fff;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 12px;
      width: 150px;
    }

    .notes-action-btn {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      color: #888;
      padding: 6px;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .notes-action-btn:hover {
      background: rgba(255,255,255,0.1);
      color: #fff;
    }

    .notes-list {
      background: rgba(255,255,255,0.02);
      border-radius: 12px;
      overflow: hidden;
    }

    .notes-empty {
      padding: 40px;
      text-align: center;
      color: #666;
      font-size: 14px;
    }

    .note-item {
      padding: 15px 20px;
      border-bottom: 1px solid rgba(255,255,255,0.04);
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 15px;
    }

    .note-item:last-child {
      border-bottom: none;
    }

    .note-content {
      flex: 1;
    }

    .note-text {
      font-size: 14px;
      color: #ccc;
      line-height: 1.5;
      margin-bottom: 6px;
    }

    .note-meta {
      font-size: 11px;
      color: #666;
    }

    .note-actions {
      display: flex;
      gap: 6px;
      opacity: 0;
      transition: opacity 0.2s;
    }

    .note-item:hover .note-actions {
      opacity: 1;
    }

    .note-btn {
      background: rgba(255,255,255,0.05);
      border: none;
      color: #888;
      padding: 6px;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .note-btn:hover {
      background: rgba(255,255,255,0.1);
      color: #fff;
    }

    .note-btn.delete:hover {
      background: rgba(255,68,102,0.2);
      color: #ff4466;
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.1);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(255,255,255,0.2);
    }
  </style>
</head>
<body class="bg-app-bg text-white h-screen flex flex-col overflow-hidden font-sans">
  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="fixed inset-0 bg-[#1a1a2e] z-50 flex flex-col items-center justify-center">
    <div class="w-16 h-16 mb-6">
      <img src="../assets/logo.png" alt="Logo" class="w-16 h-16 animate-pulse">
    </div>
    <div class="text-xl font-semibold text-white mb-2">Whisper Voice</div>
    <div class="text-sm text-gray-400 mb-6" id="loadingStatus">Starte Python Server...</div>
    <div class="w-48 h-1 bg-gray-700 rounded-full overflow-hidden">
      <div id="loadingBar" class="h-full bg-cyan-400 rounded-full transition-all duration-500" style="width: 10%"></div>
    </div>
    <div class="text-xs text-gray-600 mt-4">Bitte warten...</div>
  </div>

  <!-- Titlebar -->
  <div class="titlebar h-8 bg-app-dark flex justify-end" style="-webkit-app-region: drag;">
    <div class="window-controls flex" style="-webkit-app-region: no-drag;">
      <button class="window-btn w-12 h-8 border-none bg-transparent text-gray-500 text-xs cursor-pointer flex items-center justify-center transition-all hover:bg-white/10 hover:text-white" id="minimizeBtn">
        <svg viewBox="0 0 10 1" class="w-2.5 h-2.5 fill-current"><rect width="10" height="1"/></svg>
      </button>
      <button class="window-btn w-12 h-8 border-none bg-transparent text-gray-500 text-xs cursor-pointer flex items-center justify-center transition-all hover:bg-white/10 hover:text-white" id="maximizeBtn">
        <svg viewBox="0 0 10 10" class="w-2.5 h-2.5"><rect x="0" y="0" width="10" height="10" fill="none" stroke="currentColor" stroke-width="1"/></svg>
      </button>
      <button class="window-btn close w-12 h-8 border-none bg-transparent text-gray-500 text-xs cursor-pointer flex items-center justify-center transition-all hover:bg-red-600 hover:text-white" id="closeBtn">
        <svg viewBox="0 0 10 10" class="w-2.5 h-2.5"><path d="M1,1 L9,9 M9,1 L1,9" stroke="currentColor" stroke-width="1.2"/></svg>
      </button>
    </div>
  </div>

  <div class="app-content flex-1 flex overflow-hidden">
  <!-- Sidebar -->
  <div class="sidebar w-56 bg-[#12121c] border-r border-white/5 flex flex-col py-5">
    <div class="logo flex items-center gap-2.5 px-5 mb-8">
      <div class="w-9 h-9">
        <img src="../assets/logo.png" alt="Logo" class="w-9 h-9">
      </div>
      <span class="text-lg font-semibold text-white">Whisper Voice</span>
    </div>

    <nav class="nav flex-1">
      <div class="nav-item active flex items-center gap-3 px-5 py-3 text-gray-500 cursor-pointer transition-all border-l-[3px] border-transparent hover:bg-white/[0.03] hover:text-white" data-panel="home">
        <svg viewBox="0 0 24 24" class="w-5 h-5 fill-current"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
        <span class="text-sm">Home</span>
      </div>
      <div class="nav-item flex items-center gap-3 px-5 py-3 text-gray-500 cursor-pointer transition-all border-l-[3px] border-transparent hover:bg-white/[0.03] hover:text-white" data-panel="history">
        <svg viewBox="0 0 24 24" class="w-5 h-5 fill-current"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/></svg>
        <span class="text-sm">Verlauf</span>
      </div>
      <div class="nav-item flex items-center gap-3 px-5 py-3 text-gray-500 cursor-pointer transition-all border-l-[3px] border-transparent hover:bg-white/[0.03] hover:text-white" data-panel="notes">
        <svg viewBox="0 0 24 24" class="w-5 h-5 fill-current"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
        <span class="text-sm">Notizen</span>
      </div>
      <div class="nav-item flex items-center gap-3 px-5 py-3 text-gray-500 cursor-pointer transition-all border-l-[3px] border-transparent hover:bg-white/[0.03] hover:text-white" data-panel="settings">
        <svg viewBox="0 0 24 24" class="w-5 h-5 fill-current"><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
        <span class="text-sm">Einstellungen</span>
      </div>
    </nav>

    <div class="sidebar-footer px-5 pt-5 border-t border-white/5">
      <div class="inline-block bg-cyan-400/15 text-cyan-400 px-2.5 py-1 rounded-xl text-xs font-medium">v1.0.0 AnyAutomation</div>
      <div class="mt-3 p-2.5 bg-white/[0.03] rounded-lg text-xs text-gray-500">
        Dr√ºcke <kbd id="sidebarHotkey" class="bg-cyan-400 text-app-bg px-2 py-0.5 rounded font-semibold text-xs">Win+D</kbd><br>
        <small>zum Diktieren (halten)</small>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main flex-1 flex flex-col overflow-hidden">
    <div class="header px-8 py-6 border-b border-white/5">
      <div class="welcome text-2xl font-semibold mb-2">Willkommen zur√ºck</div>
      <div class="stats flex gap-5">
        <div class="stat flex items-center gap-1.5 text-sm text-gray-500">
          <span class="stat-icon">üé§</span>
          <span class="stat-value text-white font-medium" id="totalRecordings">0</span> Aufnahmen
        </div>
        <div class="stat flex items-center gap-1.5 text-sm text-gray-500">
          <span class="stat-icon">üìù</span>
          <span class="stat-value text-white font-medium" id="totalWords">0</span> W√∂rter
        </div>
        <div class="stat flex items-center gap-1.5 text-sm text-gray-500">
          <span class="stat-icon">‚ö°</span>
          Modell: <span class="stat-value text-white font-medium" id="currentModel">medium</span>
        </div>
      </div>
    </div>

    <div class="content flex-1 overflow-y-auto px-8 py-6">
      <!-- Home Panel -->
      <div class="panel active" id="panel-home">
        <div class="record-section bg-gradient-to-br from-cyan-400/10 to-cyan-600/5 border border-cyan-400/20 rounded-2xl p-8 text-center mb-6">
          <button class="record-btn w-24 h-24 rounded-full border-[3px] border-cyan-400 bg-cyan-400/10 cursor-pointer transition-all flex items-center justify-center mx-auto mb-5 hover:bg-cyan-400/20 hover:scale-105" id="recordBtn">
            <svg viewBox="0 0 24 24" class="w-10 h-10 fill-cyan-400">
              <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V5z"/>
              <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
            </svg>
          </button>
          <div class="record-hint text-gray-500 text-sm">
            Klicken oder <kbd id="hotkeyDisplay" class="bg-white/10 px-2 py-1 rounded text-xs text-white">Win+D</kbd> halten
          </div>
          <div class="status-text mt-4 text-sm text-cyan-400 min-h-[20px]" id="status">Bereit</div>
        </div>

        <div class="section-title text-xs font-semibold text-gray-600 uppercase tracking-wider mb-4">Letzte Transkription</div>
        <div class="history-list bg-white/[0.02] rounded-xl overflow-hidden">
          <div class="history-item hidden p-4 border-b border-white/[0.04] flex gap-4" id="lastTranscript" style="display: none;">
            <div class="history-time text-xs text-gray-600 min-w-[70px]" id="lastTime">--:--</div>
            <div class="history-text flex-1 text-sm text-gray-300 leading-relaxed" id="lastText"></div>
          </div>
          <div class="history-empty p-10 text-center text-gray-600 text-sm" id="emptyState">
            Noch keine Aufnahmen. Dr√ºcke den Button oder den Hotkey um zu starten.
          </div>
        </div>
      </div>

      <!-- History Panel -->
      <div class="panel" id="panel-history">
        <div class="section-title text-xs font-semibold text-gray-600 uppercase tracking-wider mb-4">Heute</div>
        <div class="history-list bg-white/[0.02] rounded-xl overflow-hidden" id="historyList">
          <div class="history-empty p-10 text-center text-gray-600 text-sm">Keine Aufnahmen heute</div>
        </div>
      </div>

      <!-- Notes Panel -->
      <div class="panel" id="panel-notes">
        <div class="notes-header">
          <div class="notes-title">F√ºr schnelle Gedanken, die du behalten m√∂chtest</div>
          <div class="notes-editor-container">
            <textarea class="notes-textarea" id="notesTextarea" placeholder="Notiz eingeben oder mit Stimme aufnehmen..."></textarea>
            <div class="notes-editor-actions">
              <button class="notes-mic-btn" id="notesMicBtn">
                <svg viewBox="0 0 24 24" width="20" height="20">
                  <path fill="currentColor" d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V5z"/>
                  <path fill="currentColor" d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                </svg>
              </button>
              <button class="notes-save-btn" id="notesSaveBtn">Speichern</button>
            </div>
          </div>
          <div class="notes-edit-hint" id="notesEditHint" style="display: none;">
            Bearbeiten: <span id="editingNoteId"></span>
            <button class="notes-cancel-btn" id="notesCancelBtn">Abbrechen</button>
          </div>
        </div>

        <div class="notes-toolbar">
          <div class="section-title">NOTIZEN</div>
          <div class="notes-actions">
            <input type="text" class="notes-search" id="notesSearch" placeholder="Suchen...">
            <button class="notes-action-btn" id="refreshNotes" title="Aktualisieren">
              <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
            </button>
          </div>
        </div>

        <div class="notes-list" id="notesList">
          <div class="notes-empty">Keine Notizen vorhanden</div>
        </div>
      </div>

      <!-- Settings Panel -->
      <div class="panel" id="panel-settings">
        <div class="settings-group bg-white/[0.02] rounded-xl p-5 mb-5">
          <div class="settings-group-title text-sm font-semibold mb-5 text-white">Tastenk√ºrzel</div>
          <div class="setting-row flex justify-between items-center py-3 border-b border-white/[0.04] last:border-b-0">
            <div>
              <div class="setting-label text-sm text-gray-400">Push-to-Talk Hotkey</div>
              <div class="setting-desc text-xs text-gray-600 mt-1">Win+Taste wird unterst√ºtzt!</div>
            </div>
            <button class="hotkey-btn bg-[#252535] border border-white/10 text-white px-4 py-2 rounded-lg text-sm cursor-pointer transition-all min-w-[150px] hover:border-cyan-400 hover:bg-[#2a2a3e]" id="hotkeyBtn">Win+D</button>
          </div>
        </div>

        <div class="settings-group bg-white/[0.02] rounded-xl p-5 mb-5">
          <div class="settings-group-title text-sm font-semibold mb-5 text-white">Whisper Einstellungen</div>
          <div class="setting-row flex justify-between items-center py-3 border-b border-white/[0.04]">
            <div>
              <div class="setting-label text-sm text-gray-400">Modell</div>
              <div class="setting-desc text-xs text-gray-600 mt-1">Gr√∂√üer = besser, aber langsamer</div>
            </div>
            <select id="modelSelect" class="bg-[#252535] border border-white/10 text-white px-3 py-2 rounded-lg text-sm min-w-[150px] focus:outline-none focus:border-cyan-400">
              <option value="tiny">Tiny (schnell)</option>
              <option value="base">Base</option>
              <option value="small">Small</option>
              <option value="medium" selected>Medium</option>
              <option value="large">Large (beste)</option>
            </select>
          </div>
          <div class="setting-row flex justify-between items-center py-3">
            <div>
              <div class="setting-label text-sm text-gray-400">Sprache</div>
              <div class="setting-desc text-xs text-gray-600 mt-1">Erkennungssprache</div>
            </div>
            <select id="languageSelect" class="bg-[#252535] border border-white/10 text-white px-3 py-2 rounded-lg text-sm min-w-[150px] focus:outline-none focus:border-cyan-400">
              <option value="de" selected>Deutsch</option>
              <option value="en">English</option>
              <option value="auto">Automatisch</option>
            </select>
          </div>
        </div>

        <div class="settings-group bg-white/[0.02] rounded-xl p-5 mb-5">
          <div class="settings-group-title text-sm font-semibold mb-5 text-white">Verhalten</div>
          <div class="setting-row flex justify-between items-center py-3 border-b border-white/[0.04]">
            <div>
              <div class="setting-label text-sm text-gray-400">Toggle-Modus</div>
              <div class="setting-desc text-xs text-gray-600 mt-1">Antippen statt Gedr√ºckt halten</div>
            </div>
            <div class="toggle">
              <input type="checkbox" id="toggleModeToggle">
              <label for="toggleModeToggle" class="toggle-slider"></label>
            </div>
          </div>
          <div class="setting-row flex justify-between items-center py-3 border-b border-white/[0.04]">
            <div>
              <div class="setting-label text-sm text-gray-400">Auto-Einf√ºgen</div>
              <div class="setting-desc text-xs text-gray-600 mt-1">Text automatisch einf√ºgen (Ctrl+V)</div>
            </div>
            <div class="toggle">
              <input type="checkbox" id="autoPasteToggle" checked>
              <label for="autoPasteToggle" class="toggle-slider"></label>
            </div>
          </div>
          <div class="setting-row flex justify-between items-center py-3">
            <div>
              <div class="setting-label text-sm text-gray-400">Floating Bar</div>
              <div class="setting-desc text-xs text-gray-600 mt-1">Schwebende Status-Leiste anzeigen</div>
            </div>
            <div class="toggle">
              <input type="checkbox" id="floatingBarToggle" checked>
              <label for="floatingBarToggle" class="toggle-slider"></label>
            </div>
          </div>
        </div>

        <div class="settings-group bg-white/[0.02] rounded-xl p-5 mb-5">
          <div class="settings-group-title text-sm font-semibold mb-5 text-white">Darstellung</div>
          <div class="setting-row flex justify-between items-center py-3">
            <div>
              <div class="setting-label text-sm text-gray-400">App-Sprache</div>
              <div class="setting-desc text-xs text-gray-600 mt-1">Sprache der Benutzeroberfl√§che</div>
            </div>
            <select id="appLanguageSelect" class="bg-[#252535] border border-white/10 text-white px-3 py-2 rounded-lg text-sm min-w-[150px] focus:outline-none focus:border-cyan-400">
              <option value="de" selected>Deutsch</option>
              <option value="en">English</option>
            </select>
          </div>
        </div>

        <!-- System & GPU Settings -->
        <div class="settings-group bg-white/[0.02] rounded-xl p-5 mb-5">
          <div class="settings-group-title text-sm font-semibold mb-5 text-white flex items-center gap-2">
            <span>System & GPU</span>
            <button id="refreshSystemInfo" class="text-cyan-400 hover:text-cyan-300 transition-colors" title="Aktualisieren">
              <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
            </button>
          </div>

          <!-- Update Available Banner -->
          <div id="updateBanner" class="hidden bg-cyan-500/10 border border-cyan-500/30 rounded-lg p-3 mb-4 text-xs">
            <div class="flex items-start gap-2">
              <span class="text-cyan-400">üîÑ</span>
              <div class="flex-1">
                <div class="text-cyan-400 font-medium">Updates verf√ºgbar</div>
                <div class="text-gray-400 mt-1" id="updateBannerText"></div>
                <button id="updateBannerBtn" class="mt-2 bg-cyan-500/20 border border-cyan-500/30 text-cyan-400 px-3 py-1 rounded text-xs hover:bg-cyan-500/30 transition-all">
                  Jetzt aktualisieren
                </button>
              </div>
              <button id="dismissUpdateBanner" class="text-gray-500 hover:text-white transition-colors" title="Schlie√üen">‚úï</button>
            </div>
          </div>

          <!-- System Info Display -->
          <div class="bg-[#1a1a2e] rounded-lg p-4 mb-4 font-mono text-xs">
            <div class="grid grid-cols-2 gap-2">
              <div class="text-gray-500">PyTorch:</div>
              <div class="text-white" id="pytorchVersion">Laden...</div>
              <div class="text-gray-500">Whisper:</div>
              <div class="text-white" id="whisperVersion">Laden...</div>
              <div class="text-gray-500">CUDA:</div>
              <div class="text-white" id="cudaVersion">Laden...</div>
              <div class="text-gray-500">GPU:</div>
              <div class="text-white" id="gpuName">Laden...</div>
              <div class="text-gray-500">Status:</div>
              <div id="gpuStatus">Laden...</div>
              <div class="text-gray-500">Aktiver Modus:</div>
              <div class="text-white" id="activeDevice">Laden...</div>
            </div>
          </div>

          <!-- GPU Compatibility Warning -->
          <div id="gpuWarning" class="hidden bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-4 text-xs">
            <div class="flex items-start gap-2">
              <span class="text-yellow-500">‚ö†Ô∏è</span>
              <div>
                <div class="text-yellow-400 font-medium" id="gpuWarningTitle">GPU nicht unterst√ºtzt</div>
                <div class="text-yellow-500/80 mt-1" id="gpuWarningText">
                  Ihre GPU wird von dieser PyTorch-Version nicht unterst√ºtzt.
                  <a href="#" id="checkPytorchLink" class="text-cyan-400 hover:underline">PyTorch Kompatibilit√§t pr√ºfen ‚Üí</a>
                </div>
              </div>
            </div>
          </div>

          <!-- GPU Mode Toggle -->
          <div class="setting-row flex justify-between items-center py-3 border-b border-white/[0.04]">
            <div>
              <div class="setting-label text-sm text-gray-400">GPU-Beschleunigung</div>
              <div class="setting-desc text-xs text-gray-600 mt-1">CUDA f√ºr schnellere Transkription nutzen</div>
            </div>
            <div class="toggle">
              <input type="checkbox" id="gpuModeToggle">
              <label for="gpuModeToggle" class="toggle-slider"></label>
            </div>
          </div>

          <!-- Update Section -->
          <div class="mt-4 pt-4 border-t border-white/[0.04]">
            <div class="text-xs text-gray-500 mb-3">Software aktualisieren</div>

            <div class="flex flex-wrap gap-2">
              <button id="updateWhisperBtn" class="bg-[#252535] border border-white/10 text-gray-300 px-3 py-1.5 rounded text-xs hover:border-cyan-400 hover:text-white transition-all flex items-center gap-1.5">
                <svg viewBox="0 0 24 24" width="12" height="12"><path fill="currentColor" d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.5-9.12 0-12.6 3.51-3.47 9.14-3.47 12.65 0L21 3v7.12z"/></svg>
                Whisper aktualisieren
              </button>
            </div>
            <div class="text-xs text-gray-600 mt-2">
              <a href="#" id="openPytorchSite" class="text-cyan-400 hover:underline">pytorch.org/get-started ‚Üí</a>
              f√ºr PyTorch/CUDA Updates
            </div>
            <div id="updateStatus" class="hidden mt-3 text-xs p-2 rounded bg-[#1a1a2e]"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div><!-- /app-content -->

  <script>
    const { ipcRenderer } = require('electron');

    // ============================================
    // Loading Overlay
    // ============================================
    const loadingOverlay = document.getElementById('loadingOverlay');
    const loadingStatus = document.getElementById('loadingStatus');
    const loadingBar = document.getElementById('loadingBar');

    // Listen for loading status updates from main process
    ipcRenderer.on('loading-status', (event, { status, progress }) => {
      loadingStatus.textContent = status;
      loadingBar.style.width = progress + '%';
    });

    // Hide overlay when server is ready
    ipcRenderer.on('server-ready', () => {
      loadingOverlay.style.opacity = '0';
      loadingOverlay.style.transition = 'opacity 0.3s ease-out';
      setTimeout(() => {
        loadingOverlay.style.display = 'none';
      }, 300);
    });

    // √úbersetzungen
    const translations = {
      de: {
        // Navigation
        home: 'Home',
        history: 'Verlauf',
        notes: 'Notizen',
        settings: 'Einstellungen',

        // Header
        welcomeBack: 'Willkommen zur√ºck',
        recordings: 'Aufnahmen',
        words: 'W√∂rter',
        model: 'Modell',

        // Home Panel
        clickOrHold: 'Klicken oder {hotkey} halten',
        clickOrTap: 'Klicken oder {hotkey} tippen',
        ready: 'Bereit',
        recording: 'Aufnahme...',
        processing: 'Verarbeite...',
        micNotAvailable: 'Mikrofon nicht verf√ºgbar',
        done: 'Fertig! Text kopiert',
        error: 'Fehler',
        lastTranscription: 'Letzte Transkription',
        noRecordingsYet: 'Noch keine Aufnahmen. Dr√ºcke den Button oder den Hotkey um zu starten.',

        // History Panel
        today: 'Heute',
        noRecordingsToday: 'Keine Aufnahmen heute',

        // Notes Panel
        notesTitle: 'F√ºr schnelle Gedanken, die du behalten m√∂chtest',
        notesPlaceholder: 'Notiz eingeben oder mit Stimme aufnehmen...',
        save: 'Speichern',
        update: 'Aktualisieren',
        editing: 'Bearbeiten',
        cancel: 'Abbrechen',
        notesSection: 'NOTIZEN',
        search: 'Suchen...',
        refresh: 'Aktualisieren',
        noNotes: 'Keine Notizen vorhanden',

        // Settings Panel
        hotkey: 'Tastenk√ºrzel',
        pushToTalkHotkey: 'Push-to-Talk Hotkey',
        winKeySupported: 'Win+Taste wird unterst√ºtzt!',
        pressKeys: 'Dr√ºcke Tasten...',

        whisperSettings: 'Whisper Einstellungen',
        modelLabel: 'Modell',
        modelDesc: 'Gr√∂√üer = besser, aber langsamer',
        tiny: 'Tiny (schnell)',
        base: 'Base',
        small: 'Small',
        medium: 'Medium',
        large: 'Large (beste)',

        language: 'Sprache',
        languageDesc: 'Erkennungssprache',
        german: 'Deutsch',
        english: 'English',
        auto: 'Automatisch',

        behavior: 'Verhalten',
        toggleMode: 'Toggle-Modus',
        toggleModeDesc: 'Antippen statt Gedr√ºckt halten',
        autoPaste: 'Auto-Einf√ºgen',
        autoPasteDesc: 'Text automatisch einf√ºgen (Ctrl+V)',
        floatingBar: 'Floating Bar',
        floatingBarDesc: 'Schwebende Status-Leiste anzeigen',

        appearance: 'Darstellung',
        appLanguage: 'App-Sprache',
        appLanguageDesc: 'Sprache der Benutzeroberfl√§che',

        // Sidebar
        pressToDictate: 'Dr√ºcke {hotkey}',
        toDictateHold: 'zum Diktieren (halten)',
        toDictateTap: 'zum Diktieren (tippen)',

        // Floating Bar
        readyToDictate: '{hotkey} zum Diktieren'
      },
      en: {
        // Navigation
        home: 'Home',
        history: 'History',
        notes: 'Notes',
        settings: 'Settings',

        // Header
        welcomeBack: 'Welcome back',
        recordings: 'Recordings',
        words: 'Words',
        model: 'Model',

        // Home Panel
        clickOrHold: 'Click or hold {hotkey}',
        clickOrTap: 'Click or tap {hotkey}',
        ready: 'Ready',
        recording: 'Recording...',
        processing: 'Processing...',
        micNotAvailable: 'Microphone not available',
        done: 'Done! Text copied',
        error: 'Error',
        lastTranscription: 'Last transcription',
        noRecordingsYet: 'No recordings yet. Press the button or hotkey to start.',

        // History Panel
        today: 'Today',
        noRecordingsToday: 'No recordings today',

        // Notes Panel
        notesTitle: 'For quick thoughts you want to keep',
        notesPlaceholder: 'Enter note or record with voice...',
        save: 'Save',
        update: 'Update',
        editing: 'Editing',
        cancel: 'Cancel',
        notesSection: 'NOTES',
        search: 'Search...',
        refresh: 'Refresh',
        noNotes: 'No notes yet',

        // Settings Panel
        hotkey: 'Hotkey',
        pushToTalkHotkey: 'Push-to-Talk Hotkey',
        winKeySupported: 'Win+Key is supported!',
        pressKeys: 'Press keys...',

        whisperSettings: 'Whisper Settings',
        modelLabel: 'Model',
        modelDesc: 'Larger = better, but slower',
        tiny: 'Tiny (fast)',
        base: 'Base',
        small: 'Small',
        medium: 'Medium',
        large: 'Large (best)',

        language: 'Language',
        languageDesc: 'Recognition language',
        german: 'German',
        english: 'English',
        auto: 'Automatic',

        behavior: 'Behavior',
        toggleMode: 'Toggle Mode',
        toggleModeDesc: 'Tap instead of hold',
        autoPaste: 'Auto-Paste',
        autoPasteDesc: 'Automatically paste text (Ctrl+V)',
        floatingBar: 'Floating Bar',
        floatingBarDesc: 'Show floating status bar',

        appearance: 'Appearance',
        appLanguage: 'App Language',
        appLanguageDesc: 'User interface language',

        // Sidebar
        pressToDictate: 'Press {hotkey}',
        toDictateHold: 'to dictate (hold)',
        toDictateTap: 'to dictate (tap)',

        // Floating Bar
        readyToDictate: '{hotkey} to dictate'
      }
    };

    let currentLang = 'de';

    function t(key, replacements = {}) {
      let text = translations[currentLang][key] || translations['de'][key] || key;
      for (const [k, v] of Object.entries(replacements)) {
        text = text.replace(`{${k}}`, v);
      }
      return text;
    }

    function applyTranslations() {
      const hotkeyStr = hotkeyDisplay.textContent;
      const isToggleMode = toggleModeToggle.checked;

      // Navigation
      document.querySelector('[data-panel="home"] span').textContent = t('home');
      document.querySelector('[data-panel="history"] span').textContent = t('history');
      document.querySelector('[data-panel="notes"] span').textContent = t('notes');
      document.querySelector('[data-panel="settings"] span').textContent = t('settings');

      // Header
      document.querySelector('.welcome').textContent = t('welcomeBack');
      document.querySelectorAll('.stat')[0].innerHTML = `<span class="stat-icon">üé§</span><span class="stat-value" id="totalRecordings">${recordingCount}</span> ${t('recordings')}`;
      document.querySelectorAll('.stat')[1].innerHTML = `<span class="stat-icon">üìù</span><span class="stat-value" id="totalWords">${wordCount}</span> ${t('words')}`;
      document.querySelectorAll('.stat')[2].innerHTML = `<span class="stat-icon">‚ö°</span>${t('model')}: <span class="stat-value" id="currentModel">${modelSelect.value}</span>`;

      // Home Panel
      document.querySelector('.record-hint').innerHTML = isToggleMode
        ? t('clickOrTap', { hotkey: `<kbd id="hotkeyDisplay">${hotkeyStr}</kbd>` })
        : t('clickOrHold', { hotkey: `<kbd id="hotkeyDisplay">${hotkeyStr}</kbd>` });
      document.querySelector('.section-title').textContent = t('lastTranscription');
      document.getElementById('emptyState').textContent = t('noRecordingsYet');

      // History Panel
      document.querySelector('#panel-history .section-title').textContent = t('today');
      const historyEmpty = document.querySelector('#historyList .history-empty');
      if (historyEmpty) historyEmpty.textContent = t('noRecordingsToday');

      // Notes Panel
      document.querySelector('.notes-title').textContent = t('notesTitle');
      document.getElementById('notesTextarea').placeholder = t('notesPlaceholder');
      document.getElementById('notesSaveBtn').textContent = editingNoteId ? t('update') : t('save');
      document.getElementById('notesCancelBtn').textContent = t('cancel');
      document.querySelector('.notes-toolbar .section-title').textContent = t('notesSection');
      document.getElementById('notesSearch').placeholder = t('search');
      const notesEmpty = document.querySelector('#notesList .notes-empty');
      if (notesEmpty) notesEmpty.textContent = t('noNotes');

      // Settings Panel - Hotkey
      document.querySelectorAll('.settings-group-title')[0].textContent = t('hotkey');
      document.querySelector('#panel-settings .setting-row .setting-label').textContent = t('pushToTalkHotkey');
      document.querySelector('#panel-settings .setting-row .setting-desc').textContent = t('winKeySupported');

      // Settings Panel - Whisper
      document.querySelectorAll('.settings-group-title')[1].textContent = t('whisperSettings');
      const settingRows = document.querySelectorAll('#panel-settings .setting-row');
      settingRows[1].querySelector('.setting-label').textContent = t('modelLabel');
      settingRows[1].querySelector('.setting-desc').textContent = t('modelDesc');
      settingRows[2].querySelector('.setting-label').textContent = t('language');
      settingRows[2].querySelector('.setting-desc').textContent = t('languageDesc');

      // Model options
      const modelOpts = modelSelect.options;
      modelOpts[0].textContent = t('tiny');
      modelOpts[1].textContent = t('base');
      modelOpts[2].textContent = t('small');
      modelOpts[3].textContent = t('medium');
      modelOpts[4].textContent = t('large');

      // Language options
      const langOpts = languageSelect.options;
      langOpts[0].textContent = t('german');
      langOpts[1].textContent = t('english');
      langOpts[2].textContent = t('auto');

      // Settings Panel - Behavior
      document.querySelectorAll('.settings-group-title')[2].textContent = t('behavior');
      settingRows[3].querySelector('.setting-label').textContent = t('toggleMode');
      settingRows[3].querySelector('.setting-desc').textContent = t('toggleModeDesc');
      settingRows[4].querySelector('.setting-label').textContent = t('autoPaste');
      settingRows[4].querySelector('.setting-desc').textContent = t('autoPasteDesc');
      settingRows[5].querySelector('.setting-label').textContent = t('floatingBar');
      settingRows[5].querySelector('.setting-desc').textContent = t('floatingBarDesc');

      // Settings Panel - Appearance (if exists)
      if (settingRows[6]) {
        document.querySelectorAll('.settings-group-title')[3].textContent = t('appearance');
        settingRows[6].querySelector('.setting-label').textContent = t('appLanguage');
        settingRows[6].querySelector('.setting-desc').textContent = t('appLanguageDesc');
      }

      // Sidebar
      const sidebarBadge = document.querySelector('.hotkey-badge');
      sidebarBadge.innerHTML = `${t('pressToDictate', { hotkey: '' })}<kbd id="sidebarHotkey">${hotkeyStr}</kbd><br><small>${isToggleMode ? t('toDictateTap') : t('toDictateHold')}</small>`;

      // Update status if ready
      if (status.textContent === 'Bereit' || status.textContent === 'Ready') {
        status.textContent = t('ready');
      }

      // Notify floating bar
      ipcRenderer.send('language-changed', currentLang);
    }

    // DOM Elements
    const recordBtn = document.getElementById('recordBtn');
    const status = document.getElementById('status');
    const hotkeyDisplay = document.getElementById('hotkeyDisplay');
    const sidebarHotkey = document.getElementById('sidebarHotkey');
    const hotkeyBtn = document.getElementById('hotkeyBtn');
    const modelSelect = document.getElementById('modelSelect');
    const languageSelect = document.getElementById('languageSelect');
    const autoPasteToggle = document.getElementById('autoPasteToggle');
    const floatingBarToggle = document.getElementById('floatingBarToggle');
    const toggleModeToggle = document.getElementById('toggleModeToggle');
    const appLanguageSelect = document.getElementById('appLanguageSelect');
    const currentModel = document.getElementById('currentModel');
    const totalRecordings = document.getElementById('totalRecordings');
    const totalWords = document.getElementById('totalWords');

    let isRecording = false;
    let mediaRecorder = null;
    let audioChunks = [];
    let isRecordingHotkey = false;
    let recordingCount = 0;
    let wordCount = 0;
    let history = [];
    let notes = [];
    let isRecordingNote = false;
    let noteMediaRecorder = null;
    let noteAudioChunks = [];
    let editingNoteId = null;

    // Stats aus Config laden
    function loadStats(config) {
      if (config.stats) {
        recordingCount = config.stats.totalRecordings || 0;
        wordCount = config.stats.totalWords || 0;
        totalRecordings.textContent = recordingCount;
        totalWords.textContent = wordCount;
      }
    }

    // Stats speichern
    function saveStats() {
      ipcRenderer.invoke('update-config', {
        stats: {
          totalRecordings: recordingCount,
          totalWords: wordCount
        }
      });
    }

    // Notes laden
    function loadNotes(config) {
      if (config.notes) {
        notes = config.notes;
        updateNotesList();
      }
    }

    // Notes speichern
    function saveNotes() {
      ipcRenderer.invoke('update-config', { notes });
    }

    // Note hinzuf√ºgen oder aktualisieren
    function saveNote() {
      const textarea = document.getElementById('notesTextarea');
      const text = textarea.value.trim();
      if (!text) return;

      if (editingNoteId) {
        // Existierende Notiz aktualisieren
        const note = notes.find(n => n.id === editingNoteId);
        if (note) {
          note.text = text;
          note.editedAt = new Date().toISOString();
        }
        cancelEdit();
      } else {
        // Neue Notiz erstellen
        const locale = currentLang === 'de' ? 'de-DE' : 'en-US';
        const note = {
          id: Date.now(),
          text: text,
          date: new Date().toISOString(),
          dateStr: new Date().toLocaleDateString(locale, {
            day: '2-digit',
            month: '2-digit',
            year: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
          })
        };
        notes.unshift(note);
      }

      textarea.value = '';
      saveNotes();
      updateNotesList();
    }

    // Note bearbeiten
    function editNote(id) {
      const note = notes.find(n => n.id === id);
      if (!note) return;

      editingNoteId = id;
      const textarea = document.getElementById('notesTextarea');
      textarea.value = note.text;
      textarea.focus();

      document.getElementById('notesEditHint').style.display = 'flex';
      document.getElementById('notesSaveBtn').textContent = 'Aktualisieren';
    }

    // Bearbeitung abbrechen
    function cancelEdit() {
      editingNoteId = null;
      document.getElementById('notesTextarea').value = '';
      document.getElementById('notesEditHint').style.display = 'none';
      document.getElementById('notesSaveBtn').textContent = 'Speichern';
    }

    // Note l√∂schen
    function deleteNote(id) {
      notes = notes.filter(n => n.id !== id);
      if (editingNoteId === id) {
        cancelEdit();
      }
      saveNotes();
      updateNotesList();
    }

    // Note kopieren
    function copyNote(text) {
      navigator.clipboard.writeText(text.replace(/\\n/g, '\n'));
    }

    // Notes-Liste aktualisieren
    function updateNotesList(filter = '') {
      const list = document.getElementById('notesList');
      const filtered = filter
        ? notes.filter(n => n.text.toLowerCase().includes(filter.toLowerCase()))
        : notes;

      if (filtered.length === 0) {
        list.innerHTML = '<div class="notes-empty">Keine Notizen vorhanden</div>';
      } else {
        list.innerHTML = filtered.map(n => `
          <div class="note-item" data-id="${n.id}">
            <div class="note-content">
              <div class="note-text">${n.text}</div>
              <div class="note-meta">${n.dateStr}</div>
            </div>
            <div class="note-actions">
              <button class="note-btn edit" onclick="editNote(${n.id})">
                <svg viewBox="0 0 24 24" width="14" height="14"><path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
              </button>
              <button class="note-btn copy" onclick="copyNote('${n.text.replace(/'/g, "\\'").replace(/\n/g, "\\n")}')">
                <svg viewBox="0 0 24 24" width="14" height="14"><path fill="currentColor" d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
              </button>
              <button class="note-btn delete" onclick="deleteNote(${n.id})">
                <svg viewBox="0 0 24 24" width="14" height="14"><path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
              </button>
            </div>
          </div>
        `).join('');
      }
    }

    // Navigation
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
        item.classList.add('active');
        document.getElementById('panel-' + item.dataset.panel).classList.add('active');
      });
    });

    // Config laden
    ipcRenderer.invoke('get-config').then(config => {
      const hotkeyStr = config.hotkeyDisplay.replace(' (halten)', '').replace(' (tippen)', '');
      hotkeyDisplay.textContent = hotkeyStr;
      sidebarHotkey.textContent = hotkeyStr;
      hotkeyBtn.textContent = hotkeyStr;
      modelSelect.value = config.whisperModel;
      languageSelect.value = config.language;
      autoPasteToggle.checked = config.autoPaste;
      floatingBarToggle.checked = config.showFloatingBar;
      toggleModeToggle.checked = config.toggleMode || false;
      currentModel.textContent = config.whisperModel;
      loadStats(config);
      loadNotes(config);

      // App-Sprache laden und anwenden
      currentLang = config.appLanguage || 'de';
      appLanguageSelect.value = currentLang;
      applyTranslations();
    });

    // Hotkey Recording via Helper (unterst√ºtzt Win-Key!)
    hotkeyBtn.addEventListener('click', () => {
      if (isRecordingHotkey) return;
      isRecordingHotkey = true;
      hotkeyBtn.classList.add('recording');
      hotkeyBtn.textContent = t('pressKeys');
      // Helper in Recording-Modus setzen
      ipcRenderer.send('start-hotkey-recording');
    });

    // Timeout f√ºr Recording abbrechen
    let recordingTimeout = null;
    hotkeyBtn.addEventListener('click', () => {
      if (recordingTimeout) clearTimeout(recordingTimeout);
      recordingTimeout = setTimeout(() => {
        if (isRecordingHotkey) {
          isRecordingHotkey = false;
          hotkeyBtn.classList.remove('recording');
          ipcRenderer.invoke('get-config').then(config => {
            hotkeyBtn.textContent = config.hotkeyDisplay.replace(' (halten)', '');
          });
          ipcRenderer.send('cancel-hotkey-recording');
        }
      }, 10000); // 10 Sekunden Timeout
    });

    // Hotkey vom Helper empfangen
    ipcRenderer.on('hotkey-recorded', (event, hotkeyConfig) => {
      isRecordingHotkey = false;
      if (recordingTimeout) clearTimeout(recordingTimeout);
      hotkeyBtn.classList.remove('recording');
      hotkeyBtn.textContent = hotkeyConfig.display;
      hotkeyDisplay.textContent = hotkeyConfig.display;
      sidebarHotkey.textContent = hotkeyConfig.display;
    });

    // Hotkey Recording failed
    ipcRenderer.on('hotkey-record-failed', (event, errorMsg) => {
      isRecordingHotkey = false;
      if (recordingTimeout) clearTimeout(recordingTimeout);
      hotkeyBtn.classList.remove('recording');
      ipcRenderer.invoke('get-config').then(config => {
        hotkeyBtn.textContent = config.hotkeyDisplay.replace(' (halten)', '').replace(' (tippen)', '');
      });
      alert(errorMsg);
    });

    // Recording
    async function startRecording() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        mediaRecorder = new MediaRecorder(stream, { mimeType: 'audio/webm' });
        audioChunks = [];

        mediaRecorder.ondataavailable = (event) => {
          audioChunks.push(event.data);
        };

        mediaRecorder.onstop = async () => {
          const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
          await processAudio(audioBlob);
          stream.getTracks().forEach(track => track.stop());
        };

        mediaRecorder.start();
        isRecording = true;
        recordBtn.classList.add('recording');
        setStatus(t('recording'), '');

      } catch (err) {
        console.error('Mikrofon Fehler:', err);
        setStatus(t('micNotAvailable'), 'error');
      }
    }

    function stopRecording() {
      if (mediaRecorder && isRecording) {
        mediaRecorder.stop();
        isRecording = false;
        recordBtn.classList.remove('recording');
        setStatus(t('processing'), '');
      }
    }

    async function processAudio(audioBlob) {
      try {
        const buffer = await audioBlob.arrayBuffer();
        const fs = require('fs');
        const path = require('path');
        const os = require('os');

        const tempPath = path.join(os.tmpdir(), `whisper_${Date.now()}.webm`);
        fs.writeFileSync(tempPath, Buffer.from(buffer));

        const text = await ipcRenderer.invoke('transcribe', tempPath);

        // Update UI
        recordingCount++;
        wordCount += text.split(/\s+/).length;
        totalRecordings.textContent = recordingCount;
        totalWords.textContent = wordCount;
        saveStats();

        // Show last transcript
        const now = new Date();
        const locale = currentLang === 'de' ? 'de-DE' : 'en-US';
        const timeStr = now.toLocaleTimeString(locale, { hour: '2-digit', minute: '2-digit' });
        document.getElementById('lastTranscript').style.display = 'flex';
        document.getElementById('emptyState').style.display = 'none';
        document.getElementById('lastTime').textContent = timeStr;
        document.getElementById('lastText').textContent = text;

        // Add to history
        addToHistory(timeStr, text);

        setStatus(t('done'), 'success');
        fs.unlinkSync(tempPath);

      } catch (err) {
        console.error('Transkriptions-Fehler:', err);
        setStatus(t('error') + ': ' + err.message, 'error');
      }
    }

    function addToHistory(time, text) {
      history.unshift({ time, text });
      updateHistoryList();
    }

    function updateHistoryList() {
      const list = document.getElementById('historyList');
      if (history.length === 0) {
        list.innerHTML = `<div class="history-empty">${t('noRecordingsToday')}</div>`;
      } else {
        list.innerHTML = history.map(h => `
          <div class="history-item">
            <div class="history-time">${h.time}</div>
            <div class="history-text">${h.text}</div>
          </div>
        `).join('');
      }
    }

    function setStatus(text, type) {
      status.textContent = text;
      status.className = 'status-text ' + (type || '');
    }

    // Button Click
    recordBtn.addEventListener('click', () => {
      if (!isRecording) {
        startRecording();
      } else {
        stopRecording();
      }
    });

    // IPC Events
    ipcRenderer.on('start-recording', () => {
      if (!isRecording) startRecording();
    });

    ipcRenderer.on('stop-recording', () => {
      if (isRecording) stopRecording();
    });

    // Settings
    function saveSettings() {
      const config = {
        whisperModel: modelSelect.value,
        language: languageSelect.value,
        autoPaste: autoPasteToggle.checked,
        showFloatingBar: floatingBarToggle.checked,
        toggleMode: toggleModeToggle.checked,
        appLanguage: appLanguageSelect.value
      };
      ipcRenderer.invoke('update-config', config);
      currentModel.textContent = modelSelect.value;
    }

    modelSelect.addEventListener('change', saveSettings);
    languageSelect.addEventListener('change', saveSettings);
    autoPasteToggle.addEventListener('change', saveSettings);
    floatingBarToggle.addEventListener('change', saveSettings);
    toggleModeToggle.addEventListener('change', saveSettings);

    // App-Sprache √§ndern
    appLanguageSelect.addEventListener('change', () => {
      currentLang = appLanguageSelect.value;
      applyTranslations();
      saveSettings();
    });

    // Notes Event Listeners
    const notesTextarea = document.getElementById('notesTextarea');
    const notesMicBtn = document.getElementById('notesMicBtn');
    const notesSaveBtn = document.getElementById('notesSaveBtn');
    const notesCancelBtn = document.getElementById('notesCancelBtn');
    const notesSearch = document.getElementById('notesSearch');
    const refreshNotes = document.getElementById('refreshNotes');

    // Speichern-Button
    notesSaveBtn.addEventListener('click', saveNote);

    // Abbrechen-Button
    notesCancelBtn.addEventListener('click', cancelEdit);

    // Ctrl+Enter zum Speichern
    notesTextarea.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && e.ctrlKey) {
        e.preventDefault();
        saveNote();
      }
    });

    // Suche
    notesSearch.addEventListener('input', (e) => {
      updateNotesList(e.target.value);
    });

    // Aktualisieren
    refreshNotes.addEventListener('click', () => {
      notesSearch.value = '';
      updateNotesList();
    });

    // Mikrofon f√ºr Notizen
    notesMicBtn.addEventListener('click', async () => {
      if (!isRecordingNote) {
        try {
          const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
          noteMediaRecorder = new MediaRecorder(stream, { mimeType: 'audio/webm' });
          noteAudioChunks = [];

          noteMediaRecorder.ondataavailable = (event) => {
            noteAudioChunks.push(event.data);
          };

          noteMediaRecorder.onstop = async () => {
            const audioBlob = new Blob(noteAudioChunks, { type: 'audio/webm' });
            stream.getTracks().forEach(track => track.stop());

            // Transkribieren
            const buffer = await audioBlob.arrayBuffer();
            const fs = require('fs');
            const path = require('path');
            const os = require('os');
            const tempPath = path.join(os.tmpdir(), `whisper_note_${Date.now()}.webm`);
            fs.writeFileSync(tempPath, Buffer.from(buffer));

            try {
              const text = await ipcRenderer.invoke('transcribe', tempPath, { skipAutoPaste: true });
              // Text in Textarea einf√ºgen statt direkt zu speichern
              const textarea = document.getElementById('notesTextarea');
              if (textarea.value) {
                textarea.value += ' ' + text;
              } else {
                textarea.value = text;
              }
              textarea.focus();
              fs.unlinkSync(tempPath);
            } catch (err) {
              console.error('Notiz-Transkription fehlgeschlagen:', err);
            }
          };

          noteMediaRecorder.start();
          isRecordingNote = true;
          notesMicBtn.classList.add('recording');
        } catch (err) {
          console.error('Mikrofon Fehler:', err);
        }
      } else {
        noteMediaRecorder.stop();
        isRecordingNote = false;
        notesMicBtn.classList.remove('recording');
      }
    });

    // Window Controls
    document.getElementById('minimizeBtn').addEventListener('click', () => {
      ipcRenderer.send('window-minimize');
    });

    document.getElementById('maximizeBtn').addEventListener('click', () => {
      ipcRenderer.send('window-maximize');
    });

    document.getElementById('closeBtn').addEventListener('click', () => {
      ipcRenderer.send('window-close');
    });

    // ============================================
    // System & GPU Settings
    // ============================================
    const gpuModeToggle = document.getElementById('gpuModeToggle');
    const pytorchVersion = document.getElementById('pytorchVersion');
    const whisperVersionEl = document.getElementById('whisperVersion');
    const cudaVersion = document.getElementById('cudaVersion');
    const gpuName = document.getElementById('gpuName');
    const gpuStatus = document.getElementById('gpuStatus');
    const activeDevice = document.getElementById('activeDevice');
    const gpuWarning = document.getElementById('gpuWarning');
    const updateStatus = document.getElementById('updateStatus');

    let systemInfo = null;
    let gpuCompatible = false;

    // Fetch system info
    async function loadSystemInfo() {
      try {
        systemInfo = await ipcRenderer.invoke('get-system-info');
        updateSystemInfoDisplay();
      } catch (err) {
        console.error('Failed to load system info:', err);
        pytorchVersion.textContent = 'Fehler';
        whisperVersionEl.textContent = '-';
        cudaVersion.textContent = '-';
        gpuName.textContent = '-';
        gpuStatus.textContent = 'Unbekannt';
        activeDevice.textContent = '-';
      }
    }

    function updateSystemInfoDisplay() {
      if (!systemInfo) return;

      pytorchVersion.textContent = systemInfo.pytorchVersion || 'Nicht installiert';
      whisperVersionEl.textContent = systemInfo.whisperVersion || 'Nicht installiert';
      cudaVersion.textContent = systemInfo.cudaVersion || 'Nicht verf√ºgbar';
      gpuName.textContent = systemInfo.gpuName || 'Keine GPU erkannt';
      activeDevice.textContent = systemInfo.activeDevice?.toUpperCase() || 'CPU';

      // GPU Status - show actual server state
      gpuCompatible = systemInfo.gpuCompatible || systemInfo.cudaAvailable; // Trust CUDA availability
      const isRunningOnGpu = systemInfo.activeDevice?.toUpperCase().includes('GPU') ||
                             systemInfo.activeDevice?.toLowerCase().includes('cuda');
      const gpuEnabled = systemInfo.gpuEnabled;

      if (systemInfo.cudaAvailable) {
        if (gpuEnabled) {
          if (isRunningOnGpu || systemInfo.activeDevice?.includes('erwartet')) {
            gpuStatus.innerHTML = '<span class="text-green-400">‚úì Aktiv auf GPU</span>';
            gpuWarning.classList.add('hidden');
          } else {
            // Server might still be starting, show as active if GPU is enabled
            gpuStatus.innerHTML = '<span class="text-green-400">‚úì GPU aktiviert</span>';
            gpuWarning.classList.add('hidden');
          }
        } else {
          gpuStatus.innerHTML = '<span class="text-gray-400">GPU verf√ºgbar</span>';
          gpuWarning.classList.add('hidden');
        }
      } else {
        gpuStatus.innerHTML = '<span class="text-gray-400">CUDA nicht verf√ºgbar</span>';
        gpuWarning.classList.add('hidden');
      }

      // Set toggle state based on config
      gpuModeToggle.checked = gpuEnabled;
      gpuModeToggle.disabled = !gpuCompatible;
    }

    // GPU Mode Toggle
    gpuModeToggle.addEventListener('change', async () => {
      if (!gpuCompatible && gpuModeToggle.checked) {
        // Revert if GPU not compatible
        gpuModeToggle.checked = false;
        showUpdateStatus('GPU nicht kompatibel - CPU-Modus bleibt aktiv', 'warning');
        return;
      }

      try {
        await ipcRenderer.invoke('set-gpu-mode', gpuModeToggle.checked);
        showUpdateStatus(gpuModeToggle.checked ? 'GPU-Modus aktiviert (Neustart erforderlich)' : 'CPU-Modus aktiviert (Neustart erforderlich)', 'success');
      } catch (err) {
        gpuModeToggle.checked = !gpuModeToggle.checked;
        showUpdateStatus('Fehler: ' + err.message, 'error');
      }
    });

    // Refresh System Info
    document.getElementById('refreshSystemInfo').addEventListener('click', () => {
      pytorchVersion.textContent = 'Laden...';
      loadSystemInfo();
    });

    // PyTorch Compatibility Link
    document.getElementById('checkPytorchLink').addEventListener('click', (e) => {
      e.preventDefault();
      require('electron').shell.openExternal('https://pytorch.org/get-started/locally/');
    });

    // Update Functions
    function showUpdateStatus(message, type = 'info') {
      updateStatus.classList.remove('hidden');
      updateStatus.className = 'mt-3 text-xs p-2 rounded bg-[#1a1a2e]';

      if (type === 'success') {
        updateStatus.innerHTML = `<span class="text-green-400">‚úì</span> ${message}`;
      } else if (type === 'error') {
        updateStatus.innerHTML = `<span class="text-red-400">‚úó</span> ${message}`;
      } else if (type === 'warning') {
        updateStatus.innerHTML = `<span class="text-yellow-400">‚ö†</span> ${message}`;
      } else {
        updateStatus.innerHTML = `<span class="text-cyan-400">‚ü≥</span> ${message}`;
      }

      // Auto-hide after 5 seconds for success messages
      if (type === 'success') {
        setTimeout(() => {
          updateStatus.classList.add('hidden');
        }, 5000);
      }
    }

    // Open PyTorch website
    document.getElementById('openPytorchSite').addEventListener('click', (e) => {
      e.preventDefault();
      require('electron').shell.openExternal('https://pytorch.org/get-started/locally/');
    });

    document.getElementById('updateWhisperBtn').addEventListener('click', async () => {
      showUpdateStatus('Whisper wird aktualisiert...', 'info');
      try {
        const result = await ipcRenderer.invoke('update-whisper');
        showUpdateStatus(result.message, result.success ? 'success' : 'error');
        if (result.success) loadSystemInfo();
      } catch (err) {
        showUpdateStatus('Fehler: ' + err.message, 'error');
      }
    });

    // Load system info on startup
    loadSystemInfo();

    // ============================================
    // Automatic Update Check on App Start
    // ============================================
    const updateBanner = document.getElementById('updateBanner');
    const updateBannerText = document.getElementById('updateBannerText');
    const updateBannerBtn = document.getElementById('updateBannerBtn');
    const dismissUpdateBanner = document.getElementById('dismissUpdateBanner');

    let pendingUpdates = null;

    async function checkForUpdates() {
      try {
        console.log('Checking for package updates...');
        const result = await ipcRenderer.invoke('check-package-updates');

        if (result.error) {
          console.log('Update check error:', result.error);
          return;
        }

        // Only show update banner for Whisper (PyTorch needs manual handling via pytorch.org)
        if (result.whisper && result.whisper.updateAvailable) {
          pendingUpdates = result;
          updateBannerText.textContent = `Whisper: ${result.whisper.installed} ‚Üí ${result.whisper.latest}`;
          updateBanner.classList.remove('hidden');
          console.log('Whisper update available:', result.whisper);
        } else {
          console.log('Whisper is up to date');
        }

        // Log PyTorch info (but don't show banner - nightly versions are fine)
        if (result.torch) {
          if (result.torch.isNightly) {
            console.log('PyTorch nightly version detected:', result.torch.installed);
          } else if (result.torch.updateAvailable) {
            console.log('PyTorch stable update available (not shown in banner):', result.torch);
          }
        }
      } catch (err) {
        console.error('Error checking for updates:', err);
      }
    }

    // Update banner button click - only update Whisper (PyTorch updates need manual selection on pytorch.org)
    updateBannerBtn.addEventListener('click', async () => {
      updateBannerBtn.disabled = true;
      updateBannerBtn.textContent = 'Aktualisiere...';
      showUpdateStatus('Whisper wird aktualisiert...', 'info');

      try {
        const result = await ipcRenderer.invoke('update-whisper');
        showUpdateStatus(result.message, result.success ? 'success' : 'error');

        if (result.success) {
          updateBanner.classList.add('hidden');
          loadSystemInfo();
        }
      } catch (err) {
        showUpdateStatus('Fehler: ' + err.message, 'error');
      } finally {
        updateBannerBtn.disabled = false;
        updateBannerBtn.textContent = 'Jetzt aktualisieren';
      }
    });

    // Dismiss update banner
    dismissUpdateBanner.addEventListener('click', () => {
      updateBanner.classList.add('hidden');
    });

    // Check for updates on app start (with small delay to not block UI)
    setTimeout(checkForUpdates, 3000);
  </script>
</body>
</html>
